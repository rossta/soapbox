Throwdown=(function(f){var b=function(g){this.text=g;this.toHtml=function(){var h;h=this.send("replaceSpecialCharacters",h);h=this.send("padWithNewLines",h);h=this.send("replaceTabs",h);h=this.send("replaceBlankLines",h);h=this.send("headersToHtml",h);return h};this.send=function(){return e.apply(this,arguments)}},d="prototype",c="    ",e=function(){var g=Array[d].slice.call(arguments,0),i=g.shift();try{return a[i].apply(this,g).process()}catch(h){throw"Error while sending '"+i+"': "+h.toString()}},a={replaceSpecialCharacters:function(){return new b.Special(arguments[0]||this.text)},padWithNewLines:function(){return new b.Padding(arguments[0]||this.text)},replaceTabs:function(){return new b.Tab(arguments[0]||this.text)},replaceBlankLines:function(){return new b.BlankLine(arguments[0]||this.text)},headersToHtml:function(){return new b.Header(arguments[0]||this.text)},inlineToHtml:function(){return new b.Inline(arguments[0]||this.text)}};b.Special=function(g){this.text=g;this.process=function(){var h=this.text.replace(/~/g,"~T").replace(/\$/g,"~D").replace(/\r\n/g,"\n").replace(/\r/g,"\n");return h}};b.Padding=function(g){this.text=g;this.process=function(){return"\n\n"+this.text+"\n\n"}};b.BlankLine=function(g){this.text=g;this.process=function(){return this.text.replace(/^[ \t]+$/mg,"")}};b.Tab=function(g){this.text=g;this.process=function(){var h=this.text.replace(/\t(?=\t)/g,c).replace(/\t/g,"~A~B").replace(/~B(.+?)~A/g,function(j,m,l){var o=m;var k=4-o.length%4;for(var n=0;n<k;n++){o+=" "}return o}).replace(/~A/g,c).replace(/~B/g,"");return h}};b.Header=function(g){this.text=g;this.process=function(){var h=this.text.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(i,j){return"<h1>"+e.call(this,"inlineToHtml",j)+"</h1>"}).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(j,i){return"<h2>"+e.call(this,"inlineToHtml",i)+"</h2>"}).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(i,k,j){var l=k.length;return"<h"+l+">"+e.call(this,"inlineToHtml",j)+"</h"+l+">"});return h}};b.Inline=function(g){this.text=g;this.process=function(){return this.text}};f.throwdown=function(g){return new b(g)};return b})(window);